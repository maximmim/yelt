<!DOCTYPE html>
<html>

<head>
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#da532c">
  <link rel="icon" href="/img/logo.png">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=0.8">
  <title>Yelt</title>
   <!-- <script>
      
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/service-worker.js')
          .then(registration => {
            console.log('Service Worker registered:', registration);
          })
          .catch(error => {
            console.log('Service Worker registration failed:', error);
          });
      }
    </script>
    <script type="module" src="/service-worker.js"></script>
-->
  <style>
    #button {
      position: absolute;
      bottom: 10px;
      right: 10px;
      width: 200px;
      height: 200px;
      font-size: 50px;
      border-radius: 20px;
    }
    #donw {
      position: absolute;
      bottom: 0px;
      width: 200px;
      height: 150px;
      left: 30%;
      font-size: 30px;
      display: none;
    }
    #play {
      position: absolute;
      width: 120px;
      height: 100px;
      display: block;
      left: 40%;
      top: 40%;
    }

    #skin {
      width: 100px;
      height: 100px;
      background-color: rgb(0, 0, 0);
      border-color: black;
      border: 3px;
      border-style: solid;
      border-radius: 15px;
      position: absolute;
      transition: transform 1s ease;
      display: block;
      right: 0;
      bottom: 10px;
      background-image: url('/img/logo.png');
    }

    #block {
      width: 100px;
      height: 100px;
      background-color: rgb(0, 0, 0);
      border-color: black;
      border: 3px;
      border-style: solid;
      border-radius: 15px;
      position: absolute;
      transition: transform 1s ease;
      display: block;
      background-image: url('/img/logo.png');
    }

    #recordList li {
      background-color: #f2f2f2;
      border: 1px solid #ccc;
      border-radius: 5px;
      list-style-type: none;
      width: 120px;
      height: 70px;
      margin-bottom: 5px;
      font-weight: bold;
    }

    #recordList li p:first-child {
      font-weight: bold;
    }

    #valuenick {
      position: absolute;
      bottom: 100px;
      padding: 20px;
      font-size: 20px;
      left: 18%;
      display: none;
    }

    #buttonsubmit {
      position: absolute;
      bottom: 20px;
      padding: 20px;
      font-size: 20px;
      left: 40%;
      display: none;
    }
  </style>
</head>

<body>
  <img src="/img/play.png" onclick="if (localStorage.nick == undefined) {alert('В вас нема ніка ')} else { document.location.replace('index.html')  }" id="play" />

  <input placeholder="Ведіть свій нік" id="valuenick">
  <button onclick="registerNickname()" id="buttonsubmit">Submit</button>

  <ul id="recordList"></ul>
<!--
<input id="da">
<button onclick="localStorage.da= document.getElementById('da').value">awd</button>
-->
  <script>
    function registerNickname() {
      var input = document.getElementById("valuenick");
      if (input.value.trim() !== "") {
        
        localStorage.nick = input.value;
        alert("Ваш нік зарегистрован");
        
        document.location.replace('index.html')

      }
    }

    document.addEventListener("DOMContentLoaded", function() {
      var input = document.getElementById("valuenick");
      var submitButton = document.getElementById("buttonsubmit");

      if (localStorage.nick === undefined || localStorage.nick.trim() === "") {
        input.style.display = "block";
        submitButton.style.display = "block";
      }

      function updateRecordList() {
        fetch("https://644ab0e4a8370fb32155be44.mockapi.io/Record")
          .then(function(response) {
            if (response.ok) {
              return response.json();
            } else {
              throw new Error("Произошла ошибка при выполнении запроса.");
            }
          })
          .then(function(data) {
            data.sort(function(a, b) {
              return b.record - a.record;
            });

            var recordList = document.getElementById("recordList");
            recordList.innerHTML = ""; // Очистка списка перед обновлением

            data.forEach(function(item) {
              var listItem = document.createElement("li");

              var nickText = document.createElement("p");
              nickText.textContent = "Nick: " + item.nick;
              listItem.appendChild(nickText);

              var recordText = document.createElement("p");
              recordText.textContent = "Record: " + item.record;
              listItem.appendChild(recordText);

              recordList.appendChild(listItem);
            });
          })
          .catch(function(error) {
            console.log("Произошла ошибка:", error);
          });
      }

      updateRecordList(); // Вызов функции первоначальной загрузки

      setInterval(updateRecordList, 1000); // Обновление каждую секунду
    });
  </script>
<button id="donw" onclick="downloadApk()">Завантажти додаток "Андроїд"</button>

<script>
  function downloadApk() {
    var link = document.createElement("a");
    link.href = "../Yelt.apk";
    link.download = "Yelt.apk";
    link.click();
  }
</script>
</body>

</html>
